{
  "id": "react-flow-custom-nodes",
  "title": "React Flow Custom Node Components",
  "category": "patterns",
  "createdAt": "2026-01-28T19:45:00.000Z",
  "tags": ["react-flow", "xyflow", "custom-nodes", "workflow"],
  "content": "## Pattern: Custom Node Components in React Flow\n\n### Architecture\n- Custom nodes are React components receiving NodeProps<T>\n- Node data interface must include `[key: string]: unknown` for @xyflow/react v12 compatibility\n- Register nodes in nodeTypes object passed to ReactFlow\n\n### Node Structure\n```typescript\nimport { NodeProps, Handle, Position } from '@xyflow/react'\n\ninterface PhaseNodeData {\n  number: number\n  title: string\n  status: 'pending' | 'in_progress' | 'completed' | 'failed' | 'skipped'\n  selected?: boolean\n  [key: string]: unknown  // Required for xyflow v12\n}\n\nexport function PhaseNode({ data }: NodeProps<PhaseNodeData>) {\n  return (\n    <div className={`node-container ${data.selected ? 'ring-2 ring-amber-500' : ''}`}>\n      <Handle type=\"target\" position={Position.Top} />\n      {/* Node content */}\n      <Handle type=\"source\" position={Position.Bottom} />\n    </div>\n  )\n}\n```\n\n### Registration\n```typescript\nconst nodeTypes = { phase: PhaseNode, issue: IssueNode, ship: ShipNode }\n<ReactFlow nodeTypes={nodeTypes} ... />\n```\n\n### Key Files\n- `src/renderer/src/components/workflow/nodes/PhaseNode.tsx`\n- `src/renderer/src/components/workflow/nodes/IssueNode.tsx`\n- `src/renderer/src/components/workflow/nodes/ShipNode.tsx`\n- `src/renderer/src/components/workflow/WorkflowCanvas.tsx`\n\n### Status Styling Pattern\nUse a statusStyles object for consistent colors:\n```typescript\nconst statusStyles = {\n  pending: 'border-slate-500 border-dashed bg-slate-800/50',\n  in_progress: 'border-amber-500 bg-amber-900/20 node-running',\n  completed: 'border-green-500 bg-green-900/20',\n  failed: 'border-red-500 bg-red-900/20',\n  skipped: 'border-slate-400 border-dotted bg-slate-800/30'\n}\n```",
  "relatedIssues": [6]
}
