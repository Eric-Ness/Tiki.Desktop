{
  "id": "context-sensitive-panel",
  "title": "Context-Sensitive Panel Rendering Pattern",
  "category": "patterns",
  "createdAt": "2026-01-28T19:45:00.000Z",
  "tags": ["react", "zustand", "ui", "panels", "state"],
  "content": "## Pattern: Context-Sensitive Panel Content\n\n### Problem\nRender different content in a panel based on what the user has selected.\n\n### Solution\nUse Zustand store to track selection, parse selection type, and render appropriate component.\n\n### Implementation\n```typescript\nimport { useTikiStore } from '../../stores/tiki-store'\n\n// Parse selection type from node id\ntype SelectionType = 'empty' | 'phase' | 'issue' | 'ship'\n\nfunction getSelectionType(nodeId: string | null): SelectionType {\n  if (!nodeId) return 'empty'\n  if (nodeId === 'issue-node') return 'issue'\n  if (nodeId === 'ship-node') return 'ship'\n  if (nodeId.startsWith('phase-')) return 'phase'\n  return 'empty'\n}\n\nfunction parsePhaseNumber(nodeId: string): number | null {\n  const match = nodeId.match(/^phase-(\\d+)$/)\n  return match ? parseInt(match[1], 10) : null\n}\n\nexport function DetailPanel() {\n  const selectedNode = useTikiStore((state) => state.selectedNode)\n  const currentPlan = useTikiStore((state) => state.currentPlan)\n  const selectionType = getSelectionType(selectedNode)\n\n  const renderContent = () => {\n    switch (selectionType) {\n      case 'phase':\n        const phaseNum = parsePhaseNumber(selectedNode!)\n        const phase = currentPlan?.phases.find(p => p.number === phaseNum)\n        return phase ? <PhaseDetail phase={phase} /> : <EmptyState />\n      case 'issue':\n        return <IssueDetail issue={currentPlan?.issue} />\n      case 'ship':\n        return <ShipDetail />\n      default:\n        return <EmptyState />\n    }\n  }\n\n  return (\n    <div className=\"transition-all duration-150\">\n      {renderContent()}\n    </div>\n  )\n}\n```\n\n### Key Concepts\n1. **Node ID Convention**: Use prefixes like 'phase-1', 'issue-node' for type detection\n2. **Store Integration**: Subscribe to selectedNode and relevant data\n3. **Graceful Fallbacks**: Always handle null/missing data with empty state\n4. **Smooth Transitions**: Add transition classes for view changes\n\n### Key Files\n- `src/renderer/src/components/layout/DetailPanel.tsx`\n- `src/renderer/src/components/detail/PhaseDetail.tsx`\n- `src/renderer/src/components/detail/IssueDetail.tsx`\n- `src/renderer/src/components/detail/ShipDetail.tsx`",
  "relatedIssues": [7]
}
