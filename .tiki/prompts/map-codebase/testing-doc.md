# TESTING.md Generation

Generate testing documentation by analyzing test frameworks, patterns, and coverage configuration.

## Analysis Steps

### 1. Detect Test Framework

```
# Check package.json for test dependencies
Read: package.json (look for jest, vitest, mocha, jasmine in devDependencies)

# Check for Python frameworks
Read: requirements.txt, pyproject.toml (look for pytest, unittest)

# Find test config files
Glob: jest.config.*, vitest.config.*, pytest.ini, .mocharc.*
```

### 2. Analyze Test File Patterns

```
# Find test files
Glob: **/*.test.ts, **/*.test.tsx, **/*.spec.ts, **/*.spec.tsx
Glob: **/test_*.py, **/*_test.py, **/__tests__/**/*

# Determine organization: co-located vs separate test/ directory
```

### 3. Detect Testing Patterns

```
# Test structure
Grep: "(describe|it|test|expect)\(" --type ts
Grep: "(beforeEach|afterEach|beforeAll|afterAll)" --type ts

# Mocking patterns
Grep: "(jest\.mock|vi\.mock|sinon\.|mock\()" --type ts
Grep: "(spyOn|createMock|mockImplementation)" --type ts

# React Testing Library
Grep: "(render|screen|fireEvent|userEvent|waitFor)" --type ts

# Snapshot testing
Grep: "(toMatchSnapshot|toMatchInlineSnapshot)" --type ts
```

### 4. Detect E2E Tools

```
# Playwright
Glob: playwright.config.*, **/e2e/**/*.ts
Grep: "from '@playwright/test'" --type ts

# Cypress
Glob: cypress.config.*, cypress/**/*.cy.ts
```

### 5. Detect Coverage Configuration

```
Glob: .nycrc*, .c8rc*, coverage/**
Grep: "(coverage|collectCoverage|coverageThreshold)"
```

### 6. Find Test Utilities

```
Glob: **/test-utils.*, **/testing/**/*.ts, **/__mocks__/**
Glob: **/fixtures/**, **/factories/**
```

## Output Template

Create `.tiki/TESTING.md`:

```markdown
# Testing Patterns

> Auto-generated by Tiki on {date}. Last updated: {date}.

## Test Framework

| Category | Tool | Version | Config File |
|----------|------|---------|-------------|
| Unit Testing | {tool} | {version} | {config} |
| E2E Testing | {tool} | {version} | {config} |
| Mocking | {tool} | {version} | {config} |

## Test Organization

| Aspect | Pattern | Example |
|--------|---------|---------|
| Location | {co-located/separate} | {example} |
| Naming | {pattern} | {example} |
| E2E Location | {location} | {example} |

## Running Tests

| Command | Purpose |
|---------|---------|
| {command} | {purpose} |

## Mocking Patterns

### API Mocking
{detected pattern or MSW/mock-service-worker}

### Module Mocking
{detected vi.mock/jest.mock patterns}

## Test Utilities

| Utility | Location | Purpose |
|---------|----------|---------|
| {name} | {location} | {purpose} |

## Coverage Requirements

| Metric | Threshold |
|--------|-----------|
| Statements | {value} |
| Branches | {value} |
| Functions | {value} |

---

*Run `/tiki:map-codebase --testing` to regenerate.*
```

Replace {placeholders} with discovered patterns from analysis.
