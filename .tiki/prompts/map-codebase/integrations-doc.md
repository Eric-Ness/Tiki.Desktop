# INTEGRATIONS.md Generation

Generate external integrations documentation by analyzing service dependencies and API patterns.

## Analysis Steps

### 1. Detect External Service SDKs

```
# Check package.json for service SDKs
Read: package.json (look for @aws-sdk, stripe, @sendgrid, @twilio, @auth0, firebase, @clerk, @supabase)

# Check Python dependencies
Read: requirements.txt, pyproject.toml (look for boto3, stripe, sendgrid, twilio)
```

### 2. Detect Payment Services

```
Grep: "(new Stripe|stripe\.)" --type ts
Grep: "(paypal|PAYPAL)" --type ts
Grep: "STRIPE_|PAYPAL_" --glob "**/.env*"
```

### 3. Detect Cloud Services

```
# AWS
Grep: "(S3Client|DynamoDBClient|LambdaClient|SQSClient)" --type ts
Grep: "AWS_" --glob "**/.env*"

# Google Cloud / Vercel / Azure
Grep: "@google-cloud|@azure" --type ts
Glob: vercel.json, wrangler.toml
```

### 4. Detect Authentication Providers

```
Grep: "(@auth0|@clerk|firebase/auth|next-auth|@supabase/auth)" --type ts
Grep: "(AUTH0_|CLERK_|FIREBASE_|SUPABASE_)" --glob "**/.env*"
```

### 5. Detect Communication Services

```
Grep: "(@sendgrid|twilio|resend|pusher)" --type ts
Grep: "(SENDGRID_|TWILIO_|RESEND_|PUSHER_)" --glob "**/.env*"
```

### 6. Detect Database Services

```
Grep: "(mongodb\+srv|MongoClient|@supabase/supabase-js|ioredis)" --type ts
Grep: "(MONGODB_|REDIS_|DATABASE_URL)" --glob "**/.env*"
```

### 7. Detect External API Calls

```
Grep: "fetch\(['\"]https://" --type ts
Grep: "axios\.(get|post|put|delete)\(['\"]https://" --type ts
```

### 8. Detect Webhooks

```
Grep: "(webhook|Webhook|/webhook)" --type ts
Grep: "stripe\.webhooks" --type ts
```

### 9. Detect Analytics & Monitoring

```
Grep: "(segment|mixpanel|amplitude|posthog|@sentry)" --type ts
Grep: "(SEGMENT_|SENTRY_|DATADOG_)" --glob "**/.env*"
```

## Output Template

Create `.tiki/INTEGRATIONS.md`:

```markdown
# External Integrations

> Auto-generated by Tiki on {date}. Last updated: {date}.

## Overview

Catalog of external services, APIs, and third-party integrations.

## Payment Services

| Service | SDK | Usage | Config |
|---------|-----|-------|--------|
| {service} | {sdk} | {usage} | {env_var} |

## Cloud Services

| Service | SDK | Usage | Region |
|---------|-----|-------|--------|
| {service} | {sdk} | {usage} | {region} |

## Authentication

| Provider | SDK | Method | Config |
|----------|-----|--------|--------|
| {provider} | {sdk} | {method} | {env_var} |

## Communication Services

| Service | SDK | Purpose | Config |
|---------|-----|---------|--------|
| {service} | {sdk} | {purpose} | {env_var} |

## Database Services

| Service | SDK | Purpose | Config |
|---------|-----|---------|--------|
| {service} | {sdk} | {purpose} | {env_var} |

## Analytics & Monitoring

| Service | SDK | Purpose | Config |
|---------|-----|---------|--------|
| {service} | {sdk} | {purpose} | {env_var} |

## External APIs

| API | Purpose | Authentication |
|-----|---------|----------------|
| {api} | {purpose} | {auth_type} |

## Webhook Endpoints

| Endpoint | Service | Purpose |
|----------|---------|---------|
| {endpoint} | {service} | {purpose} |

## Environment Variables

### Required for Production

| Variable | Service | Description |
|----------|---------|-------------|
| {var} | {service} | {description} |

### Required for Development

| Variable | Service | Description |
|----------|---------|-------------|
| {var} | {service} | {description} |

## Security Notes

1. All API keys stored in environment variables
2. Webhook endpoints verify signatures
3. Use scoped API keys where available

---

*Run `/tiki:map-codebase --integrations` to regenerate.*
```

Replace {placeholders} with discovered integrations from analysis.
