# Feature Scoping

Interactive workflow for scoping requirements by category.

## Overview

Transform research findings (or conversation) into scoped requirements with REQ-IDs.

## With Research

If `.tiki/research/project/FEATURES.md` exists, present features by category.

### Present Categories

For each category in FEATURES.md:

```text
## [Category Name]

**Table stakes:**
- [Feature 1] — [brief description]
- [Feature 2] — [brief description]

**Differentiators:**
- [Feature 3] — [brief description]
- [Feature 4] — [brief description]

**Research notes:** [any relevant context]
```

### Scope Each Category

Use AskUserQuestion with multiSelect for each category:

```text
header: "[Category]"
question: "Which [category] features are in v1?"
multiSelect: true
options:
  - "[Feature 1]" — [description]
  - "[Feature 2]" — [description]
  - "[Feature 3]" — [description]
  - "None for v1" — Defer entire category
```

Track results:

- Selected features → v1 requirements
- Unselected table stakes → v2 (users expect these eventually)
- Unselected differentiators → out of scope

## Without Research

Gather requirements conversationally.

Ask: "What are the main things users need to be able to do?"

For each capability:

1. Ask clarifying questions to make it specific
2. Probe for related capabilities
3. Group into categories

Then scope each category as above.

## Generate REQ-IDs

Format: `[CATEGORY]-[NUMBER]`

| Category | Code |
| -------- | ---- |
| Authentication | AUTH |
| Core Functionality | CORE |
| Data Management | DATA |
| User Interface | UI |
| Integration | INT |
| Security | SEC |
| Performance | PERF |
| Documentation | DOC |

Examples: `AUTH-01`, `CORE-02`, `UI-03`

## Requirement Quality

Good requirements are:

- **Specific and testable:** "User can reset password via email link" not "Handle password reset"
- **User-centric:** "User can X" not "System does Y"
- **Atomic:** One capability per requirement
- **Independent:** Minimal dependencies on other requirements

Reject vague requirements. Push for specificity:

- "Handle authentication" → "User can log in with email/password and stay logged in"
- "Support sharing" → "User can share post via link that opens in recipient's browser"

## Generate Output Files

### .tiki/requirements.json

```json
{
  "version": "1.0",
  "createdAt": "[ISO timestamp]",
  "updatedAt": "[ISO timestamp]",
  "categories": [
    {
      "code": "AUTH",
      "name": "Authentication",
      "requirements": [
        {
          "id": "AUTH-01",
          "description": "User can create account with email/password",
          "status": "pending",
          "version": "v1",
          "linkedIssue": null
        }
      ]
    }
  ],
  "versions": {
    "v1": ["AUTH-01", "AUTH-02", "CORE-01"],
    "v2": ["AUTH-03", "UI-02"]
  },
  "outOfScope": [
    {
      "description": "OAuth social login",
      "reason": "Complexity for MVP, revisit post-launch"
    }
  ]
}
```

### .tiki/REQUIREMENTS.md

```markdown
# Requirements

## v1 Requirements

### Authentication

- [ ] **AUTH-01**: User can create account with email/password
- [ ] **AUTH-02**: User can log in and stay logged in across sessions

### Core Functionality

- [ ] **CORE-01**: User can create and save posts
- [ ] **CORE-02**: User can view list of their posts

## v2 Requirements

- [ ] **AUTH-03**: User can log in with Google OAuth
- [ ] **UI-02**: Dark mode support

## Out of Scope

- **OAuth social login** — Complexity for MVP, revisit post-launch
- **Mobile app** — Web-first, mobile later based on usage

---

*Generated by `/tiki:new-project` on [date]*
```

## Confirmation

Present full list before finalizing:

```text
## v1 Requirements

### Authentication
- [ ] **AUTH-01**: User can create account with email/password
- [ ] **AUTH-02**: User can log in and stay logged in

### Core
- [ ] **CORE-01**: User can create posts

[... full list ...]

---

Does this capture what you're building?
```

Use AskUserQuestion:

- "Looks good" → Proceed to write files
- "Adjust" → Return to scoping
