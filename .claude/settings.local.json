{
  "permissions": {
    "allow": [
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(gh issue comment:*)",
      "Skill(tiki:review-issue)",
      "Skill(tiki:review-issue:*)",
      "Bash(gh issue create --title \"feat: Add phase execution controls \\(play/pause/skip\\)\" --body \"$\\(cat <<''EOF''\n## Summary\n\nAdd interactive controls to the workflow visualization that allow users to control phase execution directly from the UI, rather than relying solely on terminal commands.\n\n## Current State\n\n- Workflow visualization shows phases as nodes in a DAG\n- Phase status is displayed \\(pending, in_progress, completed, failed\\)\n- No interactive controls exist - users must use terminal commands to control execution\n\n## Proposed Implementation\n\n### UI Components\n\n1. **Phase Control Toolbar** - Add a floating toolbar above the workflow canvas:\n   - Play/Resume button - continues execution from current phase\n   - Pause button - pauses after current phase completes\n   - Skip button - skips the selected phase \\(with confirmation\\)\n   - Redo button - re-executes a completed/failed phase\n\n2. **Phase Node Context Menu** - Right-click on phase nodes:\n   - \"Skip this phase\"\n   - \"Redo this phase\"\n   - \"Start from here\"\n   - \"View phase details\"\n\n3. **Keyboard Shortcuts**:\n   - `Space` - Toggle pause/resume\n   - `S` - Skip selected phase\n   - `R` - Redo selected phase\n\n### Technical Implementation\n\n1. **New IPC Handlers** \\(`src/main/ipc/tiki.ts`\\):\n   ```typescript\n   tiki:pause - Write pause flag to .tiki/state/\n   tiki:resume - Remove pause flag, continue execution\n   tiki:skip-phase - Execute /tiki:skip-phase command\n   tiki:redo-phase - Execute /tiki:redo-phase command\n   ```\n\n2. **Terminal Integration**:\n   - Controls should send commands to the active terminal running Claude Code\n   - Alternatively, create a dedicated \"control\" terminal for Tiki commands\n\n3. **State Updates**:\n   - Add `isPaused` to tiki state\n   - Add `canSkip`, `canRedo` computed properties based on current phase status\n\n4. **New Components**:\n   - `src/renderer/src/components/workflow/PhaseControls.tsx`\n   - `src/renderer/src/components/workflow/PhaseContextMenu.tsx`\n\n### Files to Modify\n\n- `src/renderer/src/components/workflow/WorkflowCanvas.tsx` - Add controls overlay\n- `src/renderer/src/components/workflow/nodes/PhaseNode.tsx` - Add context menu\n- `src/renderer/src/stores/tiki-store.ts` - Add control state\n- `src/main/ipc/tiki.ts` - Add control handlers\n- `src/preload/index.ts` - Expose control APIs\n\n### Edge Cases\n\n- Disable controls when no execution is active\n- Confirm before skipping phases with dependencies\n- Handle rapid button clicks \\(debounce\\)\n- Show visual feedback during command execution\n\n## Acceptance Criteria\n\n- [ ] Play/Pause button toggles execution state\n- [ ] Skip button skips selected phase with confirmation dialog\n- [ ] Redo button re-executes completed/failed phases\n- [ ] Controls are disabled appropriately based on state\n- [ ] Keyboard shortcuts work when workflow tab is focused\n- [ ] Visual feedback shows when commands are executing\nEOF\n\\)\")",
      "Bash(gh issue create --title \"feat: Wire command palette to execute Tiki commands in terminal\" --body \"$\\(cat <<''EOF''\n## Summary\n\nComplete the command execution flow so that selecting a command from the command palette actually executes it in the active terminal.\n\n## Current State\n\n- Command palette \\(Cmd/Ctrl+K\\) loads commands from `.claude/commands/tiki/*.md`\n- Commands are displayed with name, description, and argument hints\n- Recent commands are tracked\n- **Missing**: Actual execution - selecting a command does nothing\n\n## Proposed Implementation\n\n### Execution Flow\n\n1. User opens command palette \\(Cmd/Ctrl+K\\)\n2. User searches/selects a command \\(e.g., \"yolo\"\\)\n3. If command has arguments:\n   - Show argument input field\n   - Parse argumentHint for expected format\n4. On confirm:\n   - Focus active terminal \\(or create one if none exists\\)\n   - Send command text: `/tiki:commandName [args]`\n   - Close palette\n   - Track in recent commands\n\n### Technical Implementation\n\n1. **Enhance `useCommandExecution.ts`**:\n   ```typescript\n   const executeCommand = async \\(command: TikiCommand, args?: string\\) => {\n     const terminalId = activeTerminal || await createTerminal\\(\\);\n     const commandText = args \n       ? `/tiki:$command.name $args`\n       : `/tiki:$command.name`;\n     await window.tikiDesktop.terminal.write\\(terminalId, commandText + ''\\\\n''\\);\n     addToRecentCommands\\(command.name\\);\n     closePalette\\(\\);\n   };\n   ```\n\n2. **Argument Input UI**:\n   - When command has `argumentHint`, show secondary input\n   - Examples: \"issue number\", \"release version\", \"file path\"\n   - Support autocomplete for known values \\(issue numbers, release versions\\)\n\n3. **Smart Argument Suggestions**:\n   - For issue-related commands: suggest from loaded GitHub issues\n   - For release commands: suggest from loaded releases\n   - For phase commands: suggest current phase number\n\n4. **Terminal Focus Management**:\n   - Ensure terminal tab is active after command execution\n   - Scroll terminal to bottom to show new output\n\n### Files to Modify\n\n- `src/renderer/src/components/command-palette/CommandPalette.tsx` - Add execution logic\n- `src/renderer/src/hooks/useCommandExecution.ts` - Implement execute function\n- `src/renderer/src/stores/tiki-store.ts` - Add palette state \\(open/closed, selected command\\)\n\n### New Components\n\n- `src/renderer/src/components/command-palette/ArgumentInput.tsx` - Argument entry field\n- `src/renderer/src/components/command-palette/ArgumentSuggestions.tsx` - Autocomplete dropdown\n\n### Edge Cases\n\n- No active terminal: create one automatically\n- Terminal is busy: queue command or warn user\n- Invalid arguments: show validation error\n- Command not found: graceful error message\n\n## Acceptance Criteria\n\n- [ ] Selecting a command from palette executes it in terminal\n- [ ] Commands with arguments show input field before execution\n- [ ] Argument autocomplete suggests relevant values \\(issues, releases\\)\n- [ ] Terminal tab activates and scrolls after execution\n- [ ] Recent commands update after execution\n- [ ] Works with keyboard-only navigation \\(Enter to execute\\)\nEOF\n\\)\")",
      "Bash(gh issue create --title \"feat: Implement config editor for .tiki/config.json\" --body \"$\\(cat <<''EOF''\n## Summary\n\nReplace the placeholder Config tab with a functional editor for `.tiki/config.json`, allowing users to modify Tiki settings without manually editing JSON.\n\n## Current State\n\n- Config tab exists in MainContent.tsx\n- Shows placeholder text: \"Config content coming soon\"\n- No actual configuration editing capability\n- Users must manually edit `.tiki/config.json`\n\n## Proposed Implementation\n\n### Config Schema\n\nBased on Tiki''s configuration options:\n\n```json\n{\n  \"tdd\": {\n    \"enabled\": true,\n    \"framework\": \"vitest\"\n  },\n  \"releases\": {\n    \"requirementsEnabled\": true,\n    \"milestoneSync\": true\n  },\n  \"execution\": {\n    \"autoCommit\": true,\n    \"pauseOnFailure\": true\n  },\n  \"knowledge\": {\n    \"autoCapture\": true,\n    \"maxEntries\": 100\n  }\n}\n```\n\n### UI Design\n\n1. **Section-Based Layout**:\n   - Collapsible sections for each config category\n   - Toggle switches for boolean options\n   - Dropdowns for enum options\n   - Text inputs for string values\n\n2. **Form Controls**:\n   - TDD Section:\n     - Enable TDD toggle\n     - Test framework dropdown \\(vitest, jest, pytest, etc.\\)\n   - Releases Section:\n     - Requirements tracking toggle\n     - GitHub milestone sync toggle\n   - Execution Section:\n     - Auto-commit toggle\n     - Pause on failure toggle\n   - Knowledge Section:\n     - Auto-capture toggle\n     - Max entries number input\n\n3. **Save/Reset Actions**:\n   - Auto-save with debounce \\(500ms\\)\n   - Or explicit Save/Cancel buttons\n   - Reset to defaults option\n\n4. **Validation**:\n   - Schema validation before save\n   - Error messages for invalid values\n   - Highlight invalid fields\n\n### Technical Implementation\n\n1. **IPC Handlers** \\(`src/main/ipc/config.ts`\\):\n   ```typescript\n   config:read - Read .tiki/config.json\n   config:write - Write .tiki/config.json\n   config:validate - Validate config object\n   config:reset - Reset to defaults\n   ```\n\n2. **Config Service** \\(`src/main/services/config-service.ts`\\):\n   - Read/write with proper error handling\n   - JSON schema validation\n   - Default values for missing fields\n   - Backup before overwrite\n\n3. **React Components**:\n   - `ConfigEditor.tsx` - Main editor container\n   - `ConfigSection.tsx` - Collapsible section\n   - `ConfigField.tsx` - Individual field renderer\n   - Form state management with validation\n\n### Files to Create\n\n- `src/main/ipc/config.ts` - Config IPC handlers\n- `src/main/services/config-service.ts` - Config file operations\n- `src/renderer/src/components/config/ConfigEditor.tsx`\n- `src/renderer/src/components/config/ConfigSection.tsx`\n- `src/renderer/src/components/config/ConfigField.tsx`\n\n### Files to Modify\n\n- `src/main/index.ts` - Register config handlers\n- `src/preload/index.ts` - Expose config API\n- `src/renderer/src/components/layout/MainContent.tsx` - Replace placeholder\n\n### Edge Cases\n\n- Config file doesn''t exist: create with defaults\n- Config file is malformed: show error, offer reset\n- Concurrent edits: warn if file changed externally\n- Permission errors: show helpful error message\n\n## Acceptance Criteria\n\n- [ ] Config tab shows editable form for .tiki/config.json\n- [ ] All Tiki config options are exposed with appropriate controls\n- [ ] Changes save automatically or via explicit save button\n- [ ] Invalid values show validation errors\n- [ ] Reset to defaults option works\n- [ ] Missing config file is created with defaults\nEOF\n\\)\")",
      "Bash(gh issue create:*)",
      "Bash(gh label:*)",
      "Bash(gh issue edit:*)",
      "Bash(npm test:*)",
      "Bash(done)",
      "Bash(npm run build:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run typecheck:*)",
      "Bash(npm run test:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: improve LLM service error handling for missing API key\n\n- Check for ANTHROPIC_API_KEY before attempting API call\n- Use lazy client initialization\n- Add clearer error messages for common failure cases\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push:*)",
      "Bash(git commit:*)"
    ]
  }
}
